
- In a sentence: registers are small storage locations in a CPU that's used to hold temporary data during execution.

## General purpose registers

- **EAX**
	- Purpose: The [[Accumulator register]]
	- Common usage: Used for arithmetic operations (add, sub, mul) and to store calculations results
	- Examples:
	`mov eax, 15 ; loads 15 into EAX register
	`add eax, 15 ; EAX register now holds 30


- **EBX**
	- Purpose: The **Base register**
	- Common usage: Used as a pointer to data in memory or also for arithmetic purposes
	- Examples:
	`mov ebx, 0x6D616C636F7265 ; loads the memory address 0x6D616C636F7265 into EBX 


- **ECX**
	- Purpose: The **Counter** register
	- Common usage: Used as a loop counter or for string/memory operations
	- Example:
	`mov ecx, 10      ; load 10 in ec
	`loop_start:      ; create a loop
	`dec ecx          ; decrement from ecx (ecx = ecx - 1)`
	`jnz loop_start   ; jump to the start of the loop and remove if ecx != 0


- **EDX**
	- Purpose: The **Data** register
	- Common usage: Works with **eax** register for multiplication/division and holds parts of large results/data
	- Example:
	`mov eax, 20       ; loads 20 in eax
	`mov edx, 4        ; loads 4 into edx
	`mul edx           ; multiply eax by edx



## Pointer and index registers
- **ESI**
	- Purpose: The **Source** register
	- Common usage: Used for string operations to hold source address of [[mnemonic]]s like: [[movsb]], [[movsw]], [[movsd]].
	- Example:
	`mov esi, 0x6D616C636F7265 ; load source address into ESI


- **EBP**
	- Purpose: **Base Pointer** register
	- Common usage: Points to base of current [[stack frame]], and references function parameters / variables
	- Example:
	`push ebp      ; save old base pointer
	`mov ebp, esp  ; set new base pointer to the current stack pointer


- **ESP**
	- Purpose: **Stack Pointer** register
	- Common usage: Points to the top of the [[stack]], updates automatically
	- Example:
	`lea eax, [msg]     ; loads 'msg' address into eax
	`push eax           ; push the eax address onto stack
	`mov ebx, [esp]     ; reference the top of the stack using esp



## Special Purpose Registers

- **EIP**
	- Purpose: **Instruction** pointer
	- Common usage: Holds address of next instruction. This register **not** directly modifiable by most instructions, only through **[[flow instructions]]** such as: jmp, call, ret.


- **EFLAGS**
	- Purpose: **Flag** register
	- Common usage: Stores [[status flags]] that indicate operation results
	- **Flags**:
		- **Zero Flag** (ZF): operation is **zero**
		- **Carry Flag** (CF): operation results in a **carry** or **borrow** 
		- **Sign Flag** (SF): operation is **negative**


| Register | Last mame                          |
| -------- | ---------------------------------- |
| EAX      | Accumulator (arithmetic)           |
| EBX      | **Base** Register                  |
| ECX      | Counter                            |
| EDX      | **Data** register                  |
| ESI      | Source index                       |
| EDI      | Destination index                  |
| ESP      | [[stack]] pointer                  |
| EBP      | **Base** pointer ([[stack frame]]) |
| EIP      | Instruction pointer                |


## The Stack

- The stack is a piece of memory that operates by doing the last in first out (LIFO) principle. 
	- This is a data structure where the last item added is the first item to be removed.
- The stack is used to:
	- Store temporary data such as addresses, local variables, and register states.
	- Example:
![[Pasted image 20241223102630.png]]

- The stack grows downwards in memory, from higher address to lower address
- The **PUSH** mnemonic adds an item to the top of the stack.
- The **POP** mnemonic removes the most recent item that was added
	- Example: 

`; push mnemonic example
`mov eax, 10    ; loads 10 into eax register
`push eax       ; push eax (10) onto the top of the stack`

`; current stack:
`; TOP OF STACK -> 10

`mov ebx, 20    ; loads 20 into ebx register
`push ebx       ; push ebx (20) onto the stack top of the stack

`; curent stack:
`; TOP OF STACK -> 20
`;        10

`; pop mnemonic example
`pop ecx        ; pop the last item off the top of the stack

`; current stack:
`; TOP OF STACK -> 10

`pop edx        ; pop the last item off the top of the stack

`; curent stack:
`; TOP OF STACK -> 

`; the stack is now empty`